# .env.example
# Скопируйте этот файл в .env и заполните своими значениями

# === ОСНОВНЫЕ НАСТРОЙКИ ===
ENVIRONMENT=development
PORT=8080
LOG_LEVEL=info

# === DATABASE ===
DATABASE_URL=postgres://user:password@localhost/zzz_tournament?sslmode=disable

# === JWT И АУТЕНТИФИКАЦИЯ ===
JWT_SECRET=your-super-secret-jwt-key-here-change-this-in-production
JWT_ISSUER=zzz-tournament
JWT_AUDIENCE=zzz-tournament-users

# Время жизни токенов
ACCESS_TOKEN_TTL=15m
REFRESH_TOKEN_TTL=168h  # 7 дней
RESET_TOKEN_TTL=1h

# Ротация refresh токенов
REFRESH_TOKEN_ROTATION_THRESHOLD=24h

# Таймауты базы данных
DATABASE_TIMEOUT=5s

# === БЕЗОПАСНОСТЬ И АУТЕНТИФИКАЦИЯ ===
# Блокировка аккаунтов
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=30m

# Верификация email
REQUIRE_EMAIL_VERIFICATION=false

# Логирование событий безопасности
LOG_SECURITY_EVENTS=true

# === RATE LIMITING ===
RATE_LIMIT_ENABLED=true

# Общие лимиты
GLOBAL_RATE_LIMIT=100
API_RATE_LIMIT=60

# Лимиты для аутентификации
LOGIN_RATE_LIMIT=5
LOGIN_RATE_WINDOW=15m
REGISTER_RATE_LIMIT=3
REGISTER_RATE_WINDOW=1h
FORGOT_PASSWORD_RATE_LIMIT=3
FORGOT_PASSWORD_RATE_WINDOW=1h

# Лимиты для WebSocket
WEBSOCKET_RATE_LIMIT=10
MAX_WEBSOCKET_CONNECTIONS=1000

# === REDIS (для кэширования и rate limiting) ===
REDIS_URL=redis://localhost:6379
RATE_LIMIT_REDIS=false

# === EMAIL (для уведомлений и восстановления паролей) ===
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@zzz-tournament.com
EMAIL_FROM_NAME=ZZZ Tournament

# Шаблоны email
PASSWORD_RESET_TEMPLATE=password_reset
EMAIL_VERIFICATION_TEMPLATE=email_verification

# === AWS S3 (для загрузки файлов) ===
AWS_ACCESS_KEY=your-aws-access-key
AWS_SECRET_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_BUCKET=zzz-tournament-uploads

# === UPLOAD SETTINGS ===
MAX_UPLOAD_SIZE=10485760  # 10MB в байтах
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,image/gif
UPLOAD_PATH=./uploads

# === CORS ORIGINS (для продакшена) ===
ALLOWED_ORIGINS=https://zzz-tournament.example.com,https://www.zzz-tournament.example.com

# === MONITORING И МЕТРИКИ ===
SENTRY_DSN=your-sentry-dsn-here
PROMETHEUS_ENABLED=true
METRICS_API_KEY=metrics-secret-key-change-this

# Мониторинг производительности
PERFORMANCE_LOG_THRESHOLD=2s
SLOW_QUERY_LOG_THRESHOLD=1s

# === WEBSOCKET ===
WEBSOCKET_PING_INTERVAL=30s
WEBSOCKET_PONG_TIMEOUT=10s
WEBSOCKET_WRITE_TIMEOUT=10s
WEBSOCKET_READ_TIMEOUT=60s

# === ДОПОЛНИТЕЛЬНАЯ БЕЗОПАСНОСТЬ ===
BCRYPT_COST=12
CSRF_SECRET=your-csrf-secret-change-this
SESSION_SECURE=true  # true для HTTPS
SESSION_HTTPONLY=true

# Headers безопасности
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000  # 1 год
CSP_ENABLED=true

# === FEATURES FLAGS ===
ENABLE_REGISTRATION=true
ENABLE_TOURNAMENTS=true
ENABLE_CHAT=true
ENABLE_FILE_UPLOAD=true
ENABLE_ADMIN_PANEL=true
ENABLE_USER_PROFILES=true
ENABLE_LEADERBOARD=true

# === EXTERNAL SERVICES ===
DISCORD_WEBHOOK_URL=your-discord-webhook-for-notifications
SLACK_WEBHOOK_URL=your-slack-webhook-for-notifications

# === DATABASE POOL ===
DB_MAX_OPEN_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_MAX_LIFETIME=300  # секунды
DB_CONNECTION_MAX_IDLE_TIME=60  # секунды

# === КЭШИРОВАНИЕ ===
CACHE_ENABLED=true
CACHE_TTL=300  # 5 минут
CACHE_USER_PROFILES=true
CACHE_HERO_DATA=true
CACHE_LEADERBOARD=true

# === ТУРНИРЫ ===
MAX_TOURNAMENT_PARTICIPANTS=32
MIN_TOURNAMENT_PARTICIPANTS=4
TOURNAMENT_REGISTRATION_TIMEOUT=300  # 5 минут
MATCH_TIMEOUT=1800  # 30 минут

# === ЧАТ ===
MAX_MESSAGE_LENGTH=1000
MESSAGE_HISTORY_LIMIT=100
CHAT_RATE_LIMIT=10  # сообщений в минуту
ENABLE_MESSAGE_EDITING=true
MESSAGE_EDIT_TIMEOUT=300  # 5 минут

# === ПОЛЬЗОВАТЕЛИ ===
USERNAME_MIN_LENGTH=3
USERNAME_MAX_LENGTH=50
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_LENGTH=128

# Настройки рейтинга
DEFAULT_USER_RATING=1000
MIN_RATING=0
MAX_RATING=9999

# === КОМНАТЫ ===
MAX_ROOM_PARTICIPANTS=32
MIN_ROOM_PARTICIPANTS=2
ROOM_IDLE_TIMEOUT=3600  # 1 час
AUTO_DELETE_EMPTY_ROOMS=true

# === ЛОГИРОВАНИЕ ===
LOG_FORMAT=json  # json или text
LOG_FILE_ENABLED=false
LOG_FILE_PATH=./logs/app.log
LOG_ROTATION_ENABLED=false
LOG_MAX_SIZE=100  # MB
LOG_MAX_BACKUPS=5
LOG_MAX_AGE=30  # дней

# Уровни логирования по компонентам
AUTH_LOG_LEVEL=info
DB_LOG_LEVEL=warn
WS_LOG_LEVEL=info
HTTP_LOG_LEVEL=info

# === DEVELOPMENT SETTINGS ===
# Эти настройки действуют только в режиме разработки
DEV_CORS_ENABLED=true
DEV_SQL_LOG_ENABLED=false
DEV_PROFILER_ENABLED=false
DEV_HOT_RELOAD=false

# === PRODUCTION SETTINGS ===
# Эти настройки действуют только в продакшене
PROD_COMPRESSION_ENABLED=true
PROD_STATIC_CACHE_TTL=86400  # 24 часа
PROD_API_CACHE_TTL=300  # 5 минут

# === BACKUP SETTINGS ===
BACKUP_ENABLED=false
BACKUP_INTERVAL=24h
BACKUP_RETENTION=7  # дней
BACKUP_S3_BUCKET=zzz-tournament-backups

# === HEALTH CHECKS ===
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s
HEALTH_CHECK_DB=true
HEALTH_CHECK_REDIS=true

# === API VERSIONING ===
API_VERSION=v1
API_DEPRECATION_WARNINGS=true
API_RATE_LIMIT_HEADERS=true

# === NOTIFICATIONS ===
NOTIFICATIONS_ENABLED=true
EMAIL_NOTIFICATIONS=true
PUSH_NOTIFICATIONS=false
DISCORD_NOTIFICATIONS=false

# Типы уведомлений
NOTIFY_TOURNAMENT_START=true
NOTIFY_MATCH_READY=true
NOTIFY_PASSWORD_RESET=true
NOTIFY_ACCOUNT_LOCKED=true

# === ANALYTICS ===
ANALYTICS_ENABLED=false
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX
TRACK_USER_EVENTS=true
TRACK_PERFORMANCE=true

# === MAINTENANCE ===
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=The service is temporarily unavailable for maintenance
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# === EXPERIMENTAL FEATURES ===
ENABLE_2FA=false
ENABLE_SOCIAL_LOGIN=false
ENABLE_API_WEBHOOKS=false
ENABLE_REAL_TIME_ANALYTICS=false